(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{148:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(11),r=n.n(i),o=(n(114),n(115),n(202)),s=n(203),l=n(40),j=n(36),d=n(41),u=n(89),b=n(13),O=n(19),h=n.n(O),x=n(34),p=n(17),m=n(185),f=n(200),g=n(206),v=n(51),y=n(198),S=n(46),w=n.n(S),L=n(181),k=n(183),E=n(186),C=n(187),I=n(188),W=n(2),N=Object(L.a)((function(e){return{backIcon:{marginRight:e.spacing(2),"& .MuiFab-label":{marginLeft:6},background:"transparent",boxShadow:"none"},title:{width:"100%",textAlign:"center",position:"absolute",zIndex:-1,left:0},toolbar:{justifyContent:"space-between",zIndex:1}}})),M=function(e){var t=e.hasBackButton,n=e.children,c=N(),a=Object(b.f)();return Object(W.jsx)(k.a,{position:"sticky",color:"primary",children:Object(W.jsx)(m.a,{maxWidth:"md",children:Object(W.jsxs)(E.a,{className:c.toolbar,children:[t&&Object(W.jsx)(C.a,{onClick:function(){return a.goBack()},className:c.backIcon,color:"primary",size:"small",children:Object(W.jsx)(I.a,{fontSize:"small"})}),Object(W.jsx)(v.a,{variant:"h6",className:c.title,children:n})]})})})},T=n(42),z=n(189),B=n(190),D=n(204),P=n(193),A=n(194),F=n(95),R=n.n(F),U=n(207),G=function(e){var t=e.locations,n=e.setSearchText,a=e.onAddSelectedLocation,i=Object(c.useState)(!1),r=Object(p.a)(i,2),o=r[0],s=r[1],l=Object(c.useState)(t),j=Object(p.a)(l,2),d=j[0],u=j[1],b=o&&0===d.length;Object(c.useEffect)((function(){o||u([])}),[o]),Object(c.useEffect)((function(){u(t)}),[t]);return Object(W.jsx)(g.a,{marginTop:5,children:Object(W.jsx)(z.a,{children:Object(W.jsx)(B.a,{children:Object(W.jsx)(U.a,{open:o,onOpen:function(){s(!0)},onClose:function(){s(!1)},getOptionSelected:function(e,t){return e.id===t.id},getOptionLabel:function(e){return"".concat(e.name,", ").concat(e.country)},options:d,loading:b,onChange:function(e,t){t&&a(t)},onInputChange:function(e,t){n(t)},renderInput:function(e){return Object(W.jsx)(D.a,Object(T.a)(Object(T.a)({},e),{},{placeholder:"Start typing at least 4 characters",variant:"outlined",label:"City",InputLabelProps:{shrink:!0},InputProps:Object(T.a)(Object(T.a)({},e.InputProps),{},{startAdornment:Object(W.jsx)(P.a,{position:"start",children:Object(W.jsx)(R.a,{})}),endAdornment:Object(W.jsxs)(W.Fragment,{children:[b?Object(W.jsx)(A.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})})})})},J=n(195),Y=n(196),q=n(197),H=n(72),K=n.n(H),Q=function(e){var t=e.location,n=e.selectedLocation,c=e.noData,a=e.onRemoveOption;return c?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(J.a,{children:Object(W.jsx)(K.a,{})}),Object(W.jsx)(Y.a,{primary:"No locations added"})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(J.a,{children:Object(W.jsx)(K.a,{})}),Object(W.jsx)(Y.a,{primary:t.name,secondary:(null===n||void 0===n?void 0:n.id)===t.id?"SELECTED":""}),Object(W.jsx)(q.a,{children:Object(W.jsx)(y.a,{color:"primary",onClick:function(){n&&a&&a(n)},children:"Remove"})})]})},V=n(192),X=n(199),Z=function(e){var t=e.locations,n=e.selectedLocation,a=e.setParentSelectedLocation,i=e.onRemoveLocation,r=Object(c.useState)(n),o=Object(p.a)(r,2),s=o[0],l=o[1];return Object(c.useEffect)((function(){s&&(console.log("selecting",s),a(s))}),[s]),Object(W.jsxs)(V.a,{children:[!t.length&&Object(W.jsx)(X.a,{divider:!0,button:!0,children:Object(W.jsx)(Q,{noData:!0,location:{}})}),t.map((function(e){return Object(W.jsx)(X.a,{divider:!0,button:!0,selected:(null===s||void 0===s?void 0:s.id)===e.id,onClick:function(){return l(e)},children:Object(W.jsx)(Q,{location:e,selectedLocation:s,onRemoveOption:i})},e.id)}))]})},$=n(61),_=Object($.b)({name:"locationSlice",initialState:{locations:[],selectedLocation:null},reducers:{unselectLocation:function(e){e.selectedLocation=null},selectLocation:function(e,t){e.selectedLocation=t.payload},addLocation:function(e,t){e.locations.push(t.payload)},removeLocation:function(e,t){var n;e.locations=e.locations.filter((function(e){return e.id!==t.payload.id})),t.payload.id===(null===(n=e.selectedLocation)||void 0===n?void 0:n.id)&&(e.selectedLocation=null)}}}),ee=_.actions,te=ee.selectLocation,ne=ee.addLocation,ce=ee.removeLocation,ae=ee.unselectLocation,ie=function(e){return e.locationSlice.locations},re=function(e){return e.locationSlice.selectedLocation},oe=function(){var e=Object(l.b)(),t=Object(b.f)(),n=Object(l.c)(ie),a=Object(l.c)(re),i=Object(c.useState)(""),r=Object(p.a)(i,2),o=r[0],s=r[1],j=Object(c.useState)(),u=Object(p.a)(j,2),O=u[0],S=u[1],L=Object(c.useState)([]),k=Object(p.a)(L,2),E=k[0],C=k[1];Object(c.useEffect)((function(){o.length>3&&Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("data/city.list.json");case 2:t=e.sent,n=t.data.filter((function(e){return-1!==e.name.toLowerCase().indexOf(o.toLowerCase())})),C(n);case 5:case"end":return e.stop()}}),e)})))()}),[o]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(M,{hasBackButton:!0,children:"Locations"}),Object(W.jsx)(m.a,{maxWidth:"sm",children:Object(W.jsxs)(f.a,{container:!0,direction:"column",children:[Object(W.jsx)(f.a,{item:!0,children:Object(W.jsx)(G,{locations:E,setSearchText:s,onAddSelectedLocation:function(t){e(ne(t)),d.b.success("Location added"),s("")}})}),Object(W.jsx)(f.a,{item:!0,children:Object(W.jsxs)(g.a,{marginTop:10,children:[Object(W.jsx)(v.a,{variant:"h6",children:"Locations"}),Object(W.jsx)(Z,{locations:n,selectedLocation:a,setParentSelectedLocation:S,onRemoveLocation:function(t){e(ce(t)),d.b.warning("Location removed")}})]})}),Object(W.jsxs)(f.a,{item:!0,children:[Object(W.jsx)(g.a,{marginTop:5,children:Object(W.jsx)(y.a,{fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){O&&(e(te(O)),t.goBack(),d.b.success("New location selected"))},disabled:!O,children:"Use selected location"})}),Object(W.jsx)(g.a,{marginTop:2,children:Object(W.jsx)(y.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){e(ae()),d.b.info("Selected location removed. Using current location"),t.goBack()},children:"Use Current Location (GPS)"})})]})]})})]})},se="http://api.openweathermap.org/data/2.5/",le="96dc7eece4e41a4d7f11fa0cc3ddec0e",je="http://openweathermap.org/img/w",de=function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat(se).concat("weather","?units=metric&exclude=minutely,hourly,alerts&appid=").concat(le,"&lat=").concat(t,"&lon=").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=n(96),be=n.n(ue),Oe=function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("".concat(se).concat("onecall","?units=metric&exclude=minutely,hourly,alerts,current&appid=").concat(le,"&lat=").concat(t,"&lon=").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=n(208),xe=n(205),pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd MMM yyyy";return xe.a(new Date(e),t)},me=Object(L.a)((function(){return{avatarWrapper:{margin:"0 auto"}}})),fe=function(e){var t=e.daily,n=t.dt,c=t.temp,a=t.weather,i=me(),r=new Date(1e3*n);return Object(W.jsx)(z.a,{children:Object(W.jsx)(B.a,{children:Object(W.jsxs)(f.a,{container:!0,direction:"column",children:[Object(W.jsxs)(f.a,{item:!0,children:[Object(W.jsx)(v.a,{variant:"body2",align:"center",children:pe(r.toDateString(),"dd MMM")}),Object(W.jsx)(v.a,{variant:"body2",align:"center",children:pe(r.toDateString(),"EEE")})]}),Object(W.jsx)(f.a,{item:!0,children:Object(W.jsx)(he.a,{className:i.avatarWrapper,src:"".concat(je,"/").concat(a[0].icon,".png")})}),Object(W.jsx)(f.a,{item:!0,children:Object(W.jsxs)(v.a,{variant:"body2",align:"center",children:[parseInt(c.day.toString()),"\xba"]})})]})})})},ge=function(e){var t=e.forecast;return Object(W.jsx)(f.a,{container:!0,justify:"center",spacing:3,children:t.map((function(e){return Object(W.jsx)(f.a,{item:!0,md:!0,children:Object(W.jsx)(fe,{daily:e})},e.dt)}))})},ve=Object(L.a)((function(e){return{locationWrapper:{fontWeight:"bold"}}})),ye=function(e){var t=e.location,n=e.date,c=ve(),a=pe(n,"EEEE"),i=pe(n,"dd MMMM");return Object(W.jsx)(z.a,{children:Object(W.jsxs)(B.a,{children:[Object(W.jsx)(v.a,{variant:"h5",align:"center",className:c.locationWrapper,children:t}),Object(W.jsxs)(v.a,{variant:"h6",align:"center",children:[a,", ",i]})]})})},Se=n(201),we=Object(L.a)((function(e){return{large:{width:e.spacing(10),height:e.spacing(10)},capitalize:{textTransform:"capitalize"}}})),Le=function(e){var t=e.icon,n=e.description,c=e.temperature,a=we();return Object(W.jsx)(z.a,{children:Object(W.jsx)(B.a,{children:Object(W.jsxs)(X.a,{component:"div",children:[Object(W.jsx)(Se.a,{children:Object(W.jsx)(he.a,{className:a.large,src:"".concat(je,"/").concat(t,".png")})}),Object(W.jsxs)(Y.a,{children:[Object(W.jsxs)(v.a,{variant:"h2",children:[parseInt(c.toString()),"\xba"]}),Object(W.jsx)(v.a,{variant:"h6",className:a.capitalize,children:n})]})]})})})},ke=Object(L.a)((function(e){return{forecastWrapper:{width:"100%"},container:{marginTop:e.spacing(3)}}}));var Ee=function(){var e=ke(),t=function(){var e=Object(c.useState)({latitude:38.7259284,longitude:-9.137382}),t=Object(p.a)(e,2),n=t[0],a=t[1],i=function(e){var t=e.coords;a({latitude:t.latitude,longitude:t.longitude})},r=function(){console.log("error getting location")};return Object(c.useEffect)((function(){var e=navigator.geolocation;if(e){var t=e.watchPosition(i,r);return function(){return e.clearWatch(t)}}}),[]),Object(T.a)({},n)}(),n=Object(l.c)(re),a=Object(c.useState)(),i=Object(p.a)(a,2),r=i[0],o=i[1],s=Object(c.useState)(),d=Object(p.a)(s,2),u=d[0],b=d[1],O=Object(c.useState)(!0),g=Object(p.a)(O,2),S=g[0],w=g[1],L=Object(c.useState)(!0),k=Object(p.a)(L,2),E=k[0],C=k[1],I=new Date;return Object(c.useEffect)((function(){var e=t.latitude,c=t.longitude;n&&(e=n.coord.lat,c=n.coord.lon),Object(x.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de(e,c);case 2:n=t.sent,o(n.data),w(!1);case 5:case"end":return t.stop()}}),t)})))()}),[t.latitude,t.longitude]),Object(c.useEffect)((function(){var e=t.latitude,c=t.longitude;n&&(e=n.coord.lat,c=n.coord.lon),Object(x.a)(h.a.mark((function t(){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe(e,c);case 2:n=t.sent,(a=n.data.daily).shift(),b(a),C(!1);case 7:case"end":return t.stop()}}),t)})))()}),[t.latitude,t.longitude]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(M,{children:Object(W.jsx)(y.a,{component:j.b,to:"/locations",color:"primary",variant:"contained",disableElevation:!0,endIcon:Object(W.jsx)(be.a,{}),children:Object(W.jsxs)(f.a,{container:!0,direction:"column",children:[Object(W.jsx)(f.a,{item:!0,children:Object(W.jsx)(v.a,{variant:"caption",children:"Selected location"})}),Object(W.jsx)(f.a,{item:!0,children:Object(W.jsx)(v.a,{variant:"caption",children:n?"".concat(null===n||void 0===n?void 0:n.name,", ").concat(null===n||void 0===n?void 0:n.country):"Current Location (GPS)"})})]})})}),Object(W.jsx)(m.a,{component:"main",maxWidth:"md",className:e.container,children:Object(W.jsxs)(f.a,{container:!0,direction:"column",alignItems:"center",spacing:5,children:[S&&Object(W.jsx)(f.a,{item:!0,children:Object(W.jsx)(A.a,{})}),!S&&r&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(f.a,{item:!0,children:Object(W.jsx)(ye,{location:"".concat(r.name,", ").concat(r.sys.country),date:I.toDateString()})}),Object(W.jsx)(f.a,{item:!0,children:Object(W.jsx)(Le,{temperature:r.main.temp,icon:r.weather[0].icon,description:r.weather[0].description})})]}),E&&Object(W.jsx)(f.a,{item:!0,children:Object(W.jsx)(A.a,{})}),!E&&u&&Object(W.jsx)(f.a,{item:!0,className:e.forecastWrapper,children:Object(W.jsx)(ge,{forecast:u})})]})})]})},Ce=n.p+"static/media/not-found.703e663c.svg",Ie=Object(L.a)((function(e){return{container:{marginTop:e.spacing(1)},box:{position:"absolute",top:"50%",transform:"translateY(-50%)",textAlign:"center",width:"100%",left:0}}})),We=function(){var e=Ie();return Object(W.jsx)(m.a,{maxWidth:"md",className:e.container,children:Object(W.jsxs)("div",{className:e.box,children:[Object(W.jsx)("img",{src:Ce}),Object(W.jsxs)(g.a,{marginTop:4,children:[Object(W.jsx)(v.a,{variant:"h5",color:"textSecondary",children:"404"}),Object(W.jsx)(v.a,{variant:"body1",color:"textSecondary",children:"Sorry, the page you visited does not exist"})]}),Object(W.jsx)(y.a,{color:"primary",variant:"outlined",component:j.b,to:"/",children:"Back"})]})})},Ne=function(){return Object(W.jsxs)(b.c,{children:[Object(W.jsx)(b.a,{exact:!0,path:"/",children:Object(W.jsx)(Ee,{})}),Object(W.jsx)(b.a,{exact:!0,path:"/locations",children:Object(W.jsx)(oe,{})}),Object(W.jsx)(b.a,{path:"*",children:Object(W.jsx)(We,{})})]})},Me=n(18),Te=n(73),ze=n(97),Be={key:"root",storage:n.n(ze).a},De=Object(Me.b)({locationSlice:_.reducer}),Pe=Object(Te.a)(Be,De),Ae=Object($.a)({reducer:Pe,middleware:function(e){return e({serializableCheck:!1})}}),Fe=Object(Te.b)(Ae),Re=n(98),Ue=Object(Re.a)({palette:{primary:{main:"#c60309"},secondary:{main:"#607d8b"}}});var Ge=function(){return Object(W.jsxs)(l.a,{store:Ae,children:[Object(W.jsx)(o.a,{}),Object(W.jsx)(u.a,{loading:null,persistor:Fe,children:Object(W.jsxs)(s.a,{theme:Ue,children:[Object(W.jsx)(d.a,{}),Object(W.jsx)(j.a,{basename:"/weather-app",children:Object(W.jsx)(Ne,{})})]})})]})};r.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(Ge,{})}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.f3f6c7d1.chunk.js.map